This README introduces the knowledge for running this code, including some introduction and examples in following sections:
1. How to run the code
2. generating the data for plots
3. python GUI example 
4. script/notebook example

#################################
# How to run the code           #
#################################

One could run the GUI interface, the Mathematica scripts (.m executables), or Mathematica notebooks (.nb executables)  
to implement the PDFsense. the GUI interface provides a user-friendly way to run the package. The script and notebook
files enable users to run the package more flexible and to run more result in a run.

Running the GUI interface:
a. ./XQPLOTTER 
b. select PDF set, experiments, variable to be presented, and the demonstration of plots 
(x, mu range, the color palette of the value range, etc)
c. click submit and output plots will pop out

Running the script and notebook:

a. setting config1.txt file under ./bin:
One could set up the input data, variables presented in plots, and the demonstration of plots in config1.txt.

In the config1.txt, #PDF set, # Figures to plot, # Experiments to include, #Functions to use in correlations, 
#User function parameters are for setup of the input data.
#x-Q figure parameters, #Histogram figure parameters, #in plots, #highlight mode, #data point size are for 
setup of how figures look like 

input data are in ./quick_data, output plots will be in ./plots/Jobs,
In the config1.txt, "#PDF set..." set the input data (output of fxQsamept_corr_v2.nb or .m)
"# Experiments..." select the experiments (represented by ID numbers) to be plotted,
if a selected experiment is not in the input data, the plots would not contain it's information. 

The user option in "#Functions (F)..." enables users (when it's Flag = 1) to create the customized function Func in 
correlations Corr(ri, Func) and sensitivity Sens(ri, Func). 

"#Axes ranges..." and the settings below it are for the demonstration of plots 

b. run the Mathematica script/notebook:
first, go to ./bin directory, then 
for the script: go to ./bin directory, then commandline math -script run_v4.m 
for the notebook: open run_v4.nb and implement the code

c. output
The output is in ./plots/Jobs,
The folder name is controlled by "#Job ID..." in config1.txt  


#################################
# generating the data for plots #
#################################

If one doesn't want to only use the data in our database (data default in ./quick_data), one could also generate the
data from the Mathematica scripts (.m executables), or Mathematica notebooks.
The input data they need is the analyzed data from CTEQ code: .pds file and .dta file 
.pds contains the PDF info and .dta contains analyzed data of experiments and the selected PDF set

a. edit the savedata_config.txt
PDF set Dir, PDF method, Expt ID List, datalis file for input setting
Correlation Path & Correlation File for output setting
If output setting is "default", the data would be saved in ./quick_data


#################################
# python GUI example            #
#################################

for the running process, please read "Running the GUI interface:" part in "How to run the code " section

The output color palette ranges are defined in "Data color palette" box, which also determines the associated histogram x-axis range

When the "user" box is checked, the script also draws the plots defined in user_func.txt, which enable users to define the customized 
functions as the correlation/sensitivity outputs. Read 3.d and 3.e in "script/notebook example" section to know more information

#################################
# script/notebook example       #
#################################

files under ./example folder are example configure files, a test observable data file (quick_data_example), and a test PDF set (CT14HERA2NNLO).
to run example files, just copy configure files under ./example to the ./bin directory and run scripts (read tutorial 4.4. SOP of Plotting Figures of New Experiments):

1. run fxQsamept_corr_v2.nb (or .m by math -script fxQsamept_corr_v2.m)
2. run run_v4.nb (or .m by math -script run_v4.m)
3. go to ./quick_data/ and ./plots/Jobs/ to see output data files and figure files
  a. make sure dtacentral_samept_data_CT14NNLO_example.dat, fxQNset_samept_data_CT14NNLO_example.dat,
     metadata_samept_data_CT14NNLO_example.dat, residualNset_samept_data_CT14NNLO_example.dat are in the ./quick_data/
  b. make sure the folder ./plots/Jobs/CT14NNLO_example_ExptInCT14Fit exist

4. check and compare the output figures with the setting in this run:
  a. open config1.txt and user_func.txt in ./plots/Jobs/CT14NNLO_example_ExptInCT14Fit. They record the arguments of this run.
  Now let's first read the config1.txt

  b. Job ID (copy from the counter file): ...... set up the name of the output folder and PDF set: ...... set up the input data.
  The input data is CT14NNLO_example so that the output data listed in 3.a will be the input data. 

  c. in the # Figures to plot...... paragraph, Flag: ...... determine the observables in the output figures.
  Here for Type 1~6, Flags are 1, so the 6 kinds of observable will be in the output folder. 
  Let's check it:
  xQbyexpt_xQ.png, expt_error_ratio_xQ+1_samept.png, residual_xQ+1_samept.png, dr_xQ+1_samept.png are corresponding figures of 
  Type 1~4.  
  corrdr_xQ+1_f0_samept.png and corr_xQ+1_f0_samept.png are the Type 5, 6.

  d. #Functions (F)...... indicates that the Flag of anti-d, gluon, and b quark = 1, so they will be in the output.
  The convention of anti-b quark to b quark are from -5 to +5, so corrdr_xQ+1_f0_samept.png is the plot of gluon.
  You will also find corrdr_xQ+1_f-2_samept.png and corrdr_xQ+1_f5_samept.png, which are plots of anti-d and b quarks.
  
  e. You also see the Flag of "user" is 1, so the script will run the user-customized functions. They are defined in user_func.txt.
  In user_func.txt, you see there are four functions, so you will see there are four more output correlation/sensitivity plots with
  filename = corrdr_xQ+1_f6_samept.png, ......, corrdr_xQ+1_f9_samept.png

  f. open corrdr_xQ+1_f0_samept.png and compare with #Highlighting...... part of config1.txt. The highlight mode of Type 5 is 1,
  so the highlight range of Type 5 is {{ -5.0, -0.25},{ 0.25, 5.0}}, which is at the up-right side of corrdr_xQ+1_f0_samept.png.
  Also the points with values in the range of -0.25~0.25 are grayed out for they are not highlighted.
  Then open expt_error_ratio_xQ+1_samept.png and compare with #Highlighting...... part of config1.txt. The highlight mode of 
  Type 5 is 0, so the plot does not highlight part of points. In expt_error_ratio_xQ+1_samept.png, all points are colored accordding
  to their values.

  g. See #Axes ranges...... part and expt_error_ratio_xQ+1_samept.png. The scale range in the plot is auto at the x-axis and 1~6000 
  at the y-axis, check whether the range of the y-axis is from 1~6000.
  Also, the color palette range is auto, so the color palette at the right-side of the plot is from 0~the maximum value in points.
  The histogram corresponding to the plot (expt_error_ratio_hist+1_samept.png) also set the x-axis range to be the same as the 
  color palette range.  
    

Under ./quick, there are default 3 plotted data: CT14NNLO, CH14HERA2NNLO, and CT14HERA2_no_jet,
To use them to plot, just set in the config1.txt as their names, e.g.
......
PDF set: CT14HERA2NNLO
......


note:
1. To know how to run, read tutorial 4.1 (mathematicav23_eg_program_note_v8.pdf) Run Step By Step
2. To know what's the difference among executable files, read tutorial 4.3. Input And Output Of Executables
3. code_tutorial.nb is used to run tutorial of functions in the program so that users can know how to functions in the package work
4. under ./bin/tools are some tools for advanced analysis,
a. make_info_table_v2.nb and read_info_table_v2_TH_BT_v2.nb could analyze the info files of the outputs of run_v4.nb(.m) (e.g. corr_info-1__samept_info.txt),
the output are tables of statistical quantities for the data corresponding to output plots with the .tex format
b. plotted_data_combine_test.nb could merge data in the database (./quick_data)
5. if the configure files are broken, fix them by copying the default configure files from ./bin/default_config_files to ./bin and change the copied filenames 
in ./bin to config1.txt and savedata_config.txt 


20170222,
in this version, there is a new mode "quick_save_plot".
By this mode users do not need to set up " = PDFsetDir !", " = PDFsetmethod !" 
since the correlation data is stored in correlation_data.m 

what we need to setup:
"quick_save_plot = runfunc !"


" = figureDirtag !" set where to put the output figures
" = PDFname !" to set which PDFset users want to plot, presently only CT14nnlo is available
" = datalist !": the path of file "dat16lisformathematica"
" = expttype !" and " = exptid !": depend on users, deciding which experiments are plotted 

===========================
How we run:
math -script correlation_plot_project_v5_script.m

============================
20170301
1. the config file is replaced by a new version
2. work for smu workstation: curie, rubin (Mathematica 10.2)
3. explanation of new configure file for the web site:
presently, my Mathematica script only read following arguments, which means
functions or options for other arguments have not yet been workout:
PDF set:
Expt. ID:
Expt. Flag: 

"PDF set:" is the "PDFname" of old configure file.
"Expt. ID:" & "Expt. Flag:" are used to replace "= expttype !" & "= exptid !";
"Expt. ID:" show all possible experimental ID a web user can choose.
"Expt. Flag:" set 0 & 1 to control whether an ID of "Expt. ID" should be used 
as data for Mathematica.

---------------------------------
Checkboxes on the website
for "...Flag:" in config file,
we design checkboxes on website, if some boxes are checked, python should 
set those flags as 1, some that the Mathematica code will run these functions  

ex:
Figures to plot
x  Experimental data points
x  Experimental errors
x  Residuals
x  PDF errors on residuals
x  Correlations with functions
x  Histograms of correlations
x  Sensitivity to functions
x  Histograms of sensitivity
x  ...
---------------------------------
for other arguments in old configure file such as:
"= figureDirtag !"
"= datalist !"
I setup these paths in Mathematica code.
plots can be found in ./plots
datalist file could be found in the same Dir of Mathematica main code.
"= runfunc !"
web version only runs quicksaveplot mode, so users don't need to choose the run mode.
"= PDFsetDir !"
"= PDFsetmethod !"
"= PDFDataDir !"
same reason, quicksaveplot mode does not use these arguments

=====================================
20170308
config file add new arguments
"Color by data percentage" allow user to input three number for percentage, ex: 40 65 90,
which means when you sort data from small to large, the position of the percentage in sorted data.
The percentage you choose seperate data by these percentage and give different color for these seprerated data in plots.

"Size" allow user to choose point size in plots
user could choose following sizes: tiny small medium large

"highlight mode" is for every plot type (presently from 1~7???)
user could choose different way to highlight the data range he want to see
#mode 0: No highlight. mode 1: highlight data by range of value. mode 2: highlight data by range of percentage
for mode 1: every plot type has 2 values, val1 val2, means highlight range of value of a data point,
ex: for "correlation" plots, 0.4  0.75 means data in (0.4,0.75) will be highlighted
for mode 2: val1 val2 are percentage
ex: for "correlation" plots, 40  75 means data in (40%,75%) will be highlighted

example for Mathematica code reading these arguments:
for following config file
Type:  1     2     3     4     5     6     7
Mode:  0     2     0     1     0     1     1
Mode 1 range: 0.5  0.75 0.5  0.75 0.5  0.75 0.5  0.75 0.5  0.75 0.5  0.75 0.5  0.75
Mode 2 range: 50  86.55 50  86.55 50  86.55 50  86.55 50  86.55 50  86.55 50  86.55
 
code will read
Type:         1     2         3     4         5     6         7
Mode:         0     2         0     1         0     1         1
Mode 1 range: x  x  x   x     x  x  0.5  0.75 x x   0.5  0.75 0.5  0.75
Mode 2 range: x  x  50  86.55 x  x  x    x x  x x   x         x  x

(
since mode 0 does not hightlight data, so the code will not use value of mode 1&2 range,
when user choose any mode, for example mode 1, config still need to have value for other modes for read 
so that code will not show error message 
 )
============================
20170316
1. user option for #Functions to use in correlations set in program
2. size of point in highlight mode automatically set as small
3. make a meta_data_structure.txt file to record meta data in program
4. make a fake function of correlation to replace correlation function of library
(so that user mode corr, dr*corr can be calculated) 
5. I find the script version and the .nb version get little different outputs, 
for four plots combined in one by Grid function:
the .nb makes
A  B  plots
C  D 
script makes
A     plots
B
C  
D
     
========================
20170420
1. point size linearly enlarge in lighlighted region
2. deeper color for PDFCorrelationplot7 (Darker 0.1 -> 0.2) 
20170427
For new experiments in 2017.0425.2123.-0500_ct14nn-new, modify the code
dtareadbotingw2016
1. ExptIDtoName: if lisTable does not include the input ExptID, return "None"
2. selectdatacolume: add new experiments into list
3. ExptIDEcm: add Sqrt(S) of new experiments
correlation_plot_project_v17_script.nb
1. (*global variables*) part, add ExptID of new experiments
quickdata
1. add data of the new CT14NNLO into quickdata by correlation_plot_project_v6_2.nb
and dtareadbotingw2016_for_v6_2.m 

future: 
1. use Export to save data into .m file
2. build a pragram to save data into .m file
3. seperate correlation project functions and the implementation part into different files
4. investigate which expts do not be included in the default calculation
5. .log file 
===========================
20170606
v21:
adjust scale of correlation, sensitivity, deltaR, central of residue
make a function: comparison of grid&samept 
make executables of three methods: samept, grid, xgrid 
write a note for tutorial
barcolor modify for presentation

v22:
make script versions for executables
delete unused functions 
data files of executables that making figures are setup in "plotdata_config.txt" 

20170707
v23:
residue -> residual for all files

20170822
adding time information of running for samept figure making executables

20170828
adding expts_info_v3.nb: this executable enables users to know the information of PDF sets, data files 
the expts_info_v3.m version: output information should come from the Print[] function, not yet finished
fix: ReadExptTable, add data label information and put in [[3]] of output
fix: readexptsbydta, remove the "wrongformat" reminder
define data label indexes of theory, shifteddata, and uncorrerror by variables (fxQsamept_corr.nb)

201700906
adding expts_info_v4.nb: change variable names, reorganize functions, add error messages for abnormal data
change data filename format .m -> .dat

20171016: add expt id 160, 545 into data list in ExptIDEcm
20171023: add combining two plotted data files function in expts_info_v5.nb
20171025: change barseperator of dr*corr in funtion processdataplotsmultiexp6percentage  

20171027: advices:
google doc to ask Tim and Fred feedbacks for this package
(highlight mode confusing, LHAParse, how to get the physical predictions for other PDF sets such as NNPDF, 
better way to read configure file: read file by Mathematica format, highlight mode grey out unhighlighted points)

 20171030: change some string = "residue" to "residual" in corr_proj_funcs.nb(.m)
20171101: change files stored in ./quick_data/
from corr, dRcorr, residual central value, delta residual, expt error ratio -> residuals in all replicas, f(x,Q) in all replicas, .dta data of central set
also, calculation of observables for plotting are moved from fxQsamept_corr_vx.nb to run_vx.nb
10171102: solve the problem arises from setting config file for xmin, xmax, ymin, ymax as auto, set auto values in processdataplotsmultiexp6percentage

20171103: add mathematica expression format for output figures so that users can change details (label, ticks) themselve
20171103: some figures output have {} symbol, delete them
20171105: output for script version .eps -> .png
20171107: for highlight range, grey out unhighlighted data and use highlight range as barlegend seperator

20171108: 
highlight mode and color palette change: 
1. highlighted points have the same size, and larger than unhighlighted points
2. color palettes of highlight and no-highlight modes are the same
3, unhighlighted points become gray no matter in which color seperator interval they are 
4. color palette, original {red - gray -blue}, become {red - green - blue}
5. expt error ratio & delta residual palette are only positive
other modify:
6. title labels of figures are simplified
7. lines in histogram part at negative side of residual error and expt error ratio are canceled, expt error ratio line: change from 50%, 70%, 85% of data to 0.1

20171108: 
modify:
delete histograms with negative ranges of expt error ratio figure and delta residual figure
take absolute values for expt error ratio data
digital # of highlight range showed in the figures <= 2  

20171108
reorganize the processdataplotsmultiexp6percentage and define it as processdataplotsmultiexp7percentage

20171109
1. new function (ReadUserFunction) for reading user define functions or data
2. build a new read configure file function: readcorrconfigfile5, deleting user define functions part in the new function 
(so ReadUserFunction will take care of that part)
3. highlight range convention change: in functions readcorrconfigfile5, processdataplotsmultiexp7percentage
new convention: {{hmin1, hmax1}, {hmin2, hmax2}, ...}
4. for histogram of |obs|, fix the problem that title labels have no |...| symbol

20171109: 
shorten name of 2017.1008.0954.-0500_CT14HERA2-jet.ev to CT14HERA2-jet.ev (in processdataplotsmultiexp7percentage)
20171111:
1. renew histogram plotting function: histplot4->histplot5, use binwidth as the input of the bin setting in histplot5
2. change lines on histogram-> think, unsaturate red and blue
3. percentage highlight mode: don't take the statistics for absolute values of data when calculating the percentage of highlight
4. fix the bug that when input 0% to GetDataPercentage, function will output data[[0]] which has no value
5. move highlight text in 2D-xQ plots to avoid covering data points and cutted by the left edge  
6. if red lines in histograms exceed the frame, don't draw them

20171116
1. change the way to input the user define function
from python script -> user_define_func.txt (don't write values from main.py)
2. input could be a combination of PDFs for various flavours or a List with Nset values
read user define function way change (ReadUserFunctionV2 -> ReadUserFunctionV2)
3. input function FxQ[iflavour] or FxQ[iexpt,iflavour,ipt,iset]

20171119
1. ReadUserFunctionV2 -> ReadUserFunctionV3
user define function is between begin tag and end tag
so users can input multi-line command
2. user_define_func.txt -> user_func.txt
3. copy user_func.txt to the output directory 

20171120
1. change the input arguments of FxQ in user_func.txt: iExpt -> ExptID. e.g. ExptID=159; FxQ[ExptID,ig,iPt,iSet] 
2. change the main.py selection of flavours part: only shows bbar ~ b radios, but still write q6, q7, and q8 to config1.txt
3. add more descriptions about how to write functions in the user_func.txt
4. for .png in python script version, also generate .pdf files

20171124
1. organize printout messages
2. .dat Plot files -> .m

20171125
1. new formulas for (x,mu): 565~568, jet processes (Expt ID > 500), ID = 267
2. put executables in ./bin for generating f(x,Q)
3. check (x,Q) are reasonable before save f(x,Q) and residuals into files ( 10^-10<x<1, <1mu<10^6)
4. lower #precision to 4 so that data files become smaller and IO become faster

20171125
(in processdataplotsmultiexp7percentage)
for the mode 4 & 5 of the color palette separator 
(*mode 4: depend on max and min of data*)
(*mode 5: depend on the range of histogram*)
use evenly separation -> use pseudo-log separation

20171125
1. define  marker shapes (PlotMarkerList)

20171126
1. apply different maker shapes on data by their categories, data after categorized by classifymode (processdataplotsmultiexp7percentage)
functions generated: ClassifyPlottedData, ClassifyByGroups, MarkerList
2. reorder the data points ordering of all groups (categories) by their absolute values 
so that small values of later groups will not cover large values of prior groups
3. for highlight mode, unhighlight size from small -> tiny for more complicated shapes in figures
4. generate plot type 1 (data points on xQ plane) by new function PlotDataTypeOne 
bacause the way we setup plot type 1 is totally different with other types (corr, sensitivy, ...)

20171126
1. apply multi-shape on all plot types (corr, sens, residual, etc)
2. enlarge open shape size so that they become more clear
3. classifymode difined as global variable in run_v4.m

20171126
delete q8 when generating f(x,Q) data (in file fxQsamept_corr_v2.nb)
extract limited digits from a number -> save files with smaller sizes (fix the bug that SetPrecision is no use)

20171127
bug fix: ExptIDinfo for JP category
20171127
delete strings for q6~q8 in processdataplotsmultiexp7percentage

20171127:
bug: 565 formula pT, y -> 0

20171127
fix bug: fraction numbers get error message when exceeding the maximum system accuracy. change fractions -> numerics 
delete some printout 

20171127
only read/copy user function when user function mode in config1.txt is on (1) 

20171128
replace hist xrange by color palette, delete hist yrange, and read jobid by string in config1.txt

20171128
fix the problem: when color palette range is not set as "auto", the color palette is not the histogram range

20171128
fix the JobID reading, no space

20171128:
remove ColorSeperator from the config file
add job description in the config file
set job description in exptname_table output

20171128
update the 11 flavour quick_data in quick_data.zip

20171128
change the labels of delta residual and sigma/D for histograms of abs values and x-mu plot

20171128
fix the bug: when transform numbers to 4-digit fraction numbers, forgot to consider the positive/minus signs

20171128
update quick_data.zip with both positive and negative valuesxx

20171129
update the default configure files

20171130
fix the bug for ID = 5xx, y = (ymin+ymax)/2, -y = -(ymin+ymax)/2
rewrite the formulas of (x,Q) transform in more readable mathematica symbols

20171201
point shapes simplify
show max and min values of the color palettes
For plot type Flag, mode 1 -> mode 1 or -1, 1: absolute values of data, -1: sign data

20171201
fix bug: when plot type = 1, xQ plot is not the figure of |data|

20171201
1. fix the upbound = max value * 1.001, 
because we add the same color interval after the max color interval for showing max and min values of the color palettes
we don't need max value * 1.001 to get the safe range anymore
2. fix bug: when drawing |data|, percentage highlight should choose the percentage of |data| rather than the percentage of data
3. enlarge star symbol
4. for plot type 1, color change for every new Expt ID
5. modify colors of shapes in plot type 1, delete grey 
 
20171201
for |data| plots (flag = +1), add +1 in their filenames (xQ+1, hist+1)
the same for data plots (flag = -1)

20171202
save files with info of data for each plot type
all .m figure files with the same plot type are saved in one file

20171202
fix the bug that each flavour index of correlation/sensitivity has a .m file

20171203
modify the number format in data info .txt files: for too large or small numbers, use the format like 2.33E6 

20171206
update the pdf combine function to fit the new output filenames (GetxQplotListSameptV2) 
rewrite merge pdf function

20171208
for jet events, select only 10-8 < x1, x2 < 1 points (in selectExptxQv2)
fix the y values in jet processes, y = (ymax - ymin)/2 -> y = (ymax + ymin)/2
add energy of 252~255 (in ExptIDEcm)
update the formulas for 252~255 (in selectExptxQv2)

20171209
for the info file, add Npt and total values info (Sum of values in all points)
update the quick_data

20171209
1. renew the convert figure format function and merge figures function
2. add nonepspdfcat, which merge files by latex code and pdflatex command.
this script is used for input files are not .eps files 
when using .eps files, users need to use epspdfcat
3. show fail message for unsuccessful generating the merged pdf file
